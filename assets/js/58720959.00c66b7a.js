"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[572],{6671:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"templates/create_import","title":"Import from Helm chart","description":"This guide explains how to create a template by importing a Helm chart from a repository. The system supports both traditional Helm repositories and OCI-based repositories.","source":"@site/docs/templates/create_import.md","sourceDirName":"templates","slug":"/templates/create_import","permalink":"/docs/templates/create_import","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Create","permalink":"/docs/templates/create_manually"},"next":{"title":"Blade templating","permalink":"/docs/templates/use_blade"}}');var i=n(4848),t=n(8453);const s={sidebar_position:2},l="Import from Helm chart",o={},c=[{value:"Required Parameters",id:"required-parameters",level:2},{value:"Import Process",id:"import-process",level:2},{value:"Example: Importing from a Traditional Repository",id:"example-importing-from-a-traditional-repository",level:2},{value:"helmrepository.yaml",id:"helmrepositoryyaml",level:3},{value:"helmrelease.yaml",id:"helmreleaseyaml",level:3},{value:"kustomization.yaml",id:"kustomizationyaml",level:3},{value:"Example: Importing from an OCI Repository",id:"example-importing-from-an-oci-repository",level:2},{value:"helmrepository.yaml",id:"helmrepositoryyaml-1",level:3},{value:"Using Imported Values",id:"using-imported-values",level:2},{value:"Basic Value Usage",id:"basic-value-usage",level:3},{value:"Combining with Port Claims",id:"combining-with-port-claims",level:3},{value:"Using Blade Control Structures",id:"using-blade-control-structures",level:3},{value:"Best Practices",id:"best-practices",level:2}];function m(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"import-from-helm-chart",children:"Import from Helm chart"})}),"\n",(0,i.jsx)(a.p,{children:"This guide explains how to create a template by importing a Helm chart from a repository. The system supports both traditional Helm repositories and OCI-based repositories."}),"\n",(0,i.jsx)(a.h2,{id:"required-parameters",children:"Required Parameters"}),"\n",(0,i.jsx)(a.p,{children:"To import a Helm chart, you need to provide the following parameters:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"repoUrl"}),": The URL of the Helm repository","\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["For traditional repositories: ",(0,i.jsx)(a.code,{children:"https://charts.example.com"})]}),"\n",(0,i.jsxs)(a.li,{children:["For OCI repositories: ",(0,i.jsx)(a.code,{children:"oci://registry.example.com/charts"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"chartName"}),": The name of the chart to import"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"repoName"}),": (Optional) A name for the repository (defaults to 'helm-repo')"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"namespace"}),": (Optional) The target namespace (defaults to 'default')"]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"import-process",children:"Import Process"}),"\n",(0,i.jsx)(a.p,{children:"When importing a Helm chart, the system will:"}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:"Connect to the specified repository"}),"\n",(0,i.jsx)(a.li,{children:"Download the chart"}),"\n",(0,i.jsx)(a.li,{children:"Extract the values.yaml file"}),"\n",(0,i.jsxs)(a.li,{children:["Generate the necessary Kubernetes manifests:","\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"helmrepository.yaml"}),": Defines the Helm repository"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"helmrelease.yaml"}),": Defines the Helm release"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"kustomization.yaml"}),": Ties everything together"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"example-importing-from-a-traditional-repository",children:"Example: Importing from a Traditional Repository"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"# Template configuration\nrepoUrl: https://charts.example.com\nchartName: my-application\nrepoName: my-repo\nnamespace: my-namespace\n"})}),"\n",(0,i.jsx)(a.p,{children:"This will generate:"}),"\n",(0,i.jsx)(a.h3,{id:"helmrepositoryyaml",children:"helmrepository.yaml"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"apiVersion: source.toolkit.fluxcd.io/v1beta2\nkind: HelmRepository\nmetadata:\n  name: my-repo\nspec:\n  url: https://charts.example.com\n  interval: 10m\n"})}),"\n",(0,i.jsx)(a.h3,{id:"helmreleaseyaml",children:"helmrelease.yaml"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"apiVersion: helm.toolkit.fluxcd.io/v2beta1\nkind: HelmRelease\nmetadata:\n  name: my-application\nspec:\n  interval: 5m\n  releaseName: my-application\n  chart:\n    spec:\n      chart: my-application\n      sourceRef:\n        kind: HelmRepository\n        name: my-repo\n        namespace: my-namespace\n      interval: 1m\n  values:\n    # Values from the chart's values.yaml\n    # These will be available as $data in your template\n"})}),"\n",(0,i.jsx)(a.h3,{id:"kustomizationyaml",children:"kustomization.yaml"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"apiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\nnamespace: my-namespace\nresources:\n  - helmrepository.yaml\n  - helmrelease.yaml\n"})}),"\n",(0,i.jsx)(a.h2,{id:"example-importing-from-an-oci-repository",children:"Example: Importing from an OCI Repository"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"# Template configuration\nrepoUrl: oci://registry.example.com/charts\nchartName: my-application\nrepoName: my-oci-repo\nnamespace: my-namespace\n"})}),"\n",(0,i.jsx)(a.p,{children:"This will generate similar manifests, but with OCI-specific configuration:"}),"\n",(0,i.jsx)(a.h3,{id:"helmrepositoryyaml-1",children:"helmrepository.yaml"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"apiVersion: source.toolkit.fluxcd.io/v1beta2\nkind: HelmRepository\nmetadata:\n  name: my-oci-repo\nspec:\n  type: oci\n  url: oci://registry.example.com/charts\n  interval: 10m\n"})}),"\n",(0,i.jsx)(a.h2,{id:"using-imported-values",children:"Using Imported Values"}),"\n",(0,i.jsxs)(a.p,{children:["The values from the Helm chart's ",(0,i.jsx)(a.code,{children:"values.yaml"})," will be available in your template through the ",(0,i.jsx)(a.code,{children:"$data"})," variable. You can use these values to customize your template using ",(0,i.jsx)(a.a,{href:"/docs/templates/use_blade",children:"Blade templating"})," and ",(0,i.jsx)(a.a,{href:"/docs/templates/use_ports",children:"port reservations"}),"."]}),"\n",(0,i.jsx)(a.h3,{id:"basic-value-usage",children:"Basic Value Usage"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: {{ $data['name'] }}\nspec:\n  replicas: {{ $data['replicaCount'] }}\n  template:\n    spec:\n      containers:\n      - name: {{ $data['container']['name'] }}\n        image: {{ $data['image']['repository'] }}:{{ $data['image']['tag'] }}\n"})}),"\n",(0,i.jsx)(a.h3,{id:"combining-with-port-claims",children:"Combining with Port Claims"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Service\nmetadata:\n  name: {{ $data['name'] }}-service\nspec:\n  ports:\n  - name: http\n    port: {{ $portClaims['web'] }}\n    targetPort: {{ $data['service']['port'] }}\n  - name: metrics\n    port: {{ $portClaims['metrics'] }}\n    targetPort: {{ $data['service']['metricsPort'] }}\n"})}),"\n",(0,i.jsx)(a.h3,{id:"using-blade-control-structures",children:"Using Blade Control Structures"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: {{ $data['name'] }}\nspec:\n  template:\n    spec:\n      containers:\n      - name: {{ $data['container']['name'] }}\n        @if($data['resources']['enabled'])\n        resources:\n          limits:\n            cpu: {{ $data['resources']['cpu'] }}\n            memory: {{ $data['resources']['memory'] }}\n        @endif\n"})}),"\n",(0,i.jsx)(a.p,{children:"For more information about:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["Using Blade templating features, see the ",(0,i.jsx)(a.a,{href:"/docs/templates/use_blade",children:"Blade templating guide"})]}),"\n",(0,i.jsxs)(a.li,{children:["Managing port reservations, see the ",(0,i.jsx)(a.a,{href:"/docs/templates/use_ports",children:"port reservations guide"})]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:"Always review the chart's values.yaml before importing"}),"\n",(0,i.jsx)(a.li,{children:"Use meaningful repository and chart names"}),"\n",(0,i.jsx)(a.li,{children:"Consider namespace isolation for different applications"}),"\n",(0,i.jsx)(a.li,{children:"Document any custom values you override"}),"\n",(0,i.jsx)(a.li,{children:"Test the imported chart in a staging environment first"}),"\n",(0,i.jsx)(a.li,{children:"Keep track of chart versions for updates"}),"\n"]})]})}function d(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>s,x:()=>l});var r=n(6540);const i={},t=r.createContext(i);function s(e){const a=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(t.Provider,{value:a},e.children)}}}]);