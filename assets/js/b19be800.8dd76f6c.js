"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[614],{8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>t});var s=i(6540);const r={},l=s.createContext(r);function c(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(l.Provider,{value:n},e.children)}},8706:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"clusters/create","title":"Create","description":"This guide explains how to add a Kubernetes cluster to Kublade. Note that Kublade does not create Kubernetes clusters - it manages existing clusters. You need to have a running Kubernetes cluster with the necessary access before proceeding.","source":"@site/docs/clusters/create.md","sourceDirName":"clusters","slug":"/clusters/create","permalink":"/docs/clusters/create","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Clusters","permalink":"/docs/category/clusters"},"next":{"title":"Monitoring","permalink":"/docs/clusters/monitor"}}');var r=i(4848),l=i(8453);const c={sidebar_position:1},t="Create",o={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Cluster Configuration",id:"cluster-configuration",level:2},{value:"Basic Information",id:"basic-information",level:3},{value:"Git Configuration",id:"git-configuration",level:3},{value:"Kubernetes Configuration",id:"kubernetes-configuration",level:3},{value:"Namespace Configuration",id:"namespace-configuration",level:3},{value:"Cluster Monitoring",id:"cluster-monitoring",level:2},{value:"Monitoring Requirements",id:"monitoring-requirements",level:3},{value:"Adding a Cluster",id:"adding-a-cluster",level:2},{value:"Post-Creation",id:"post-creation",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"create",children:"Create"})}),"\n",(0,r.jsx)(n.p,{children:"This guide explains how to add a Kubernetes cluster to Kublade. Note that Kublade does not create Kubernetes clusters - it manages existing clusters. You need to have a running Kubernetes cluster with the necessary access before proceeding."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before adding a cluster to Kublade, ensure you have:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Kubernetes Cluster Access"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A running Kubernetes cluster"}),"\n",(0,r.jsx)(n.li,{children:"Valid kubeconfig file"}),"\n",(0,r.jsx)(n.li,{children:"Service account token with appropriate permissions"}),"\n",(0,r.jsx)(n.li,{children:"API server URL"}),"\n",(0,r.jsx)(n.li,{children:"Access to the cAdvisor metrics endpoint"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Git Repository"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A Git repository for storing cluster manifests"}),"\n",(0,r.jsx)(n.li,{children:"Repository URL"}),"\n",(0,r.jsx)(n.li,{children:"Branch name"}),"\n",(0,r.jsx)(n.li,{children:"Git credentials (username/password or token)"}),"\n",(0,r.jsx)(n.li,{children:"Git user email"}),"\n",(0,r.jsx)(n.li,{children:"Base path for cluster manifests"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cluster-configuration",children:"Cluster Configuration"}),"\n",(0,r.jsx)(n.p,{children:"When adding a cluster, you need to provide the following information:"}),"\n",(0,r.jsx)(n.h3,{id:"basic-information",children:"Basic Information"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"}),": A unique name for the cluster"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"project"}),": The project this cluster belongs to"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"git-configuration",children:"Git Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"git.url"}),": Repository URL (e.g., ",(0,r.jsx)(n.a,{href:"https://git.example.com/org/cluster-manifests.git",children:"https://git.example.com/org/cluster-manifests.git"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"git.branch"}),": Branch name (e.g., main)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"git.credentials"}),": Git token or password"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"git.username"}),": Git username"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"git.email"}),": Git user email"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"git.base_path"}),": Path where manifests will be stored (e.g., clusters/production)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"kubernetes-configuration",children:"Kubernetes Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"k8s.api_url"}),": Kubernetes API server URL (e.g., ",(0,r.jsx)(n.a,{href:"https://kubernetes.example.com:6443",children:"https://kubernetes.example.com:6443"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"k8s.kubeconfig"}),": Valid kubeconfig file content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"k8s.service_account_token"}),": Service account token with appropriate permissions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"k8s.node_prefix"}),": Optional prefix for node names (e.g., prod-)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"namespace-configuration",children:"Namespace Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"namespace.utility"}),": Namespace for utility services (e.g., kublade-utility)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"namespace.ingress"}),": Namespace for ingress controllers (e.g., kublade-ingress)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cluster-monitoring",children:"Cluster Monitoring"}),"\n",(0,r.jsx)(n.p,{children:"Kublade automatically sets up monitoring for your cluster. The system:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Status Monitoring"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tracks cluster health"}),"\n",(0,r.jsx)(n.li,{children:"Monitors node status"}),"\n",(0,r.jsx)(n.li,{children:"Reports cluster availability"}),"\n",(0,r.jsx)(n.li,{children:"Updates cluster status in real-time"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Resource Monitoring"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tracks CPU usage"}),"\n",(0,r.jsx)(n.li,{children:"Monitors memory consumption"}),"\n",(0,r.jsx)(n.li,{children:"Measures storage utilization"}),"\n",(0,r.jsx)(n.li,{children:"Counts pod usage"}),"\n",(0,r.jsx)(n.li,{children:"Calculates resource utilization percentages"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-requirements",children:"Monitoring Requirements"}),"\n",(0,r.jsx)(n.p,{children:"For proper monitoring, ensure your cluster has:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Metrics Server"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Deployed and running"}),"\n",(0,r.jsx)(n.li,{children:"Accessible via the API server"}),"\n",(0,r.jsx)(n.li,{children:"Properly configured"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"cAdvisor"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enabled on nodes"}),"\n",(0,r.jsx)(n.li,{children:"Accessible via the metrics endpoint"}),"\n",(0,r.jsx)(n.li,{children:"Proper permissions set"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Resource Quotas"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Defined for namespaces"}),"\n",(0,r.jsx)(n.li,{children:"Proper limits set"}),"\n",(0,r.jsx)(n.li,{children:"Monitoring enabled"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"adding-a-cluster",children:"Adding a Cluster"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Navigate to Project"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Go to your project"}),"\n",(0,r.jsx)(n.li,{children:'Click "Add Cluster"'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Provide Basic Information"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enter cluster name"}),"\n",(0,r.jsx)(n.li,{children:"Select project"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configure Git Access"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enter repository URL"}),"\n",(0,r.jsx)(n.li,{children:"Specify branch"}),"\n",(0,r.jsx)(n.li,{children:"Provide credentials"}),"\n",(0,r.jsx)(n.li,{children:"Set Git user information"}),"\n",(0,r.jsx)(n.li,{children:"Define base path"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configure Kubernetes Access"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enter API server URL"}),"\n",(0,r.jsx)(n.li,{children:"Upload or paste kubeconfig"}),"\n",(0,r.jsx)(n.li,{children:"Provide service account token"}),"\n",(0,r.jsx)(n.li,{children:"Set node prefix (optional)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configure Namespaces"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set utility namespace"}),"\n",(0,r.jsx)(n.li,{children:"Set ingress namespace"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verify Configuration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Review all settings"}),"\n",(0,r.jsx)(n.li,{children:"Test connections"}),"\n",(0,r.jsx)(n.li,{children:"Validate permissions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"post-creation",children:"Post-Creation"}),"\n",(0,r.jsx)(n.p,{children:"After adding a cluster, Kublade will:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Initialize Monitoring"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set up status monitoring"}),"\n",(0,r.jsx)(n.li,{children:"Configure resource monitoring"}),"\n",(0,r.jsx)(n.li,{children:"Start collecting metrics"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create Namespaces"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create utility namespace"}),"\n",(0,r.jsx)(n.li,{children:"Create ingress namespace"}),"\n",(0,r.jsx)(n.li,{children:"Set up initial resources"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verify Access"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Test Git access"}),"\n",(0,r.jsx)(n.li,{children:"Validate Kubernetes connection"}),"\n",(0,r.jsx)(n.li,{children:"Check monitoring setup"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Security"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use service accounts with minimal required permissions"}),"\n",(0,r.jsx)(n.li,{children:"Store credentials securely"}),"\n",(0,r.jsx)(n.li,{children:"Regularly rotate tokens"}),"\n",(0,r.jsx)(n.li,{children:"Use HTTPS for Git repositories"}),"\n",(0,r.jsx)(n.li,{children:"Implement proper RBAC rules"}),"\n",(0,r.jsx)(n.li,{children:"Use network policies for isolation"}),"\n",(0,r.jsx)(n.li,{children:"Enable audit logging"}),"\n",(0,r.jsx)(n.li,{children:"Monitor access patterns"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Monitoring"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure metrics server is properly configured"}),"\n",(0,r.jsx)(n.li,{children:"Set up appropriate resource quotas"}),"\n",(0,r.jsx)(n.li,{children:"Monitor cluster health regularly"}),"\n",(0,r.jsx)(n.li,{children:"Set up alerts for critical metrics"}),"\n",(0,r.jsx)(n.li,{children:"Configure proper retention periods"}),"\n",(0,r.jsx)(n.li,{children:"Set up dashboards for visualization"}),"\n",(0,r.jsx)(n.li,{children:"Monitor node health"}),"\n",(0,r.jsx)(n.li,{children:"Track resource utilization"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Organization"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use meaningful cluster names"}),"\n",(0,r.jsx)(n.li,{children:"Organize Git repositories logically"}),"\n",(0,r.jsx)(n.li,{children:"Follow consistent naming conventions"}),"\n",(0,r.jsx)(n.li,{children:"Document cluster configuration"}),"\n",(0,r.jsx)(n.li,{children:"Maintain clear resource boundaries"}),"\n",(0,r.jsx)(n.li,{children:"Use proper labeling"}),"\n",(0,r.jsx)(n.li,{children:"Implement proper tagging"}),"\n",(0,r.jsx)(n.li,{children:"Keep documentation updated"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Maintenance"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Regularly update credentials"}),"\n",(0,r.jsx)(n.li,{children:"Monitor resource usage"}),"\n",(0,r.jsx)(n.li,{children:"Review and update quotas"}),"\n",(0,r.jsx)(n.li,{children:"Keep documentation current"}),"\n",(0,r.jsx)(n.li,{children:"Perform regular health checks"}),"\n",(0,r.jsx)(n.li,{children:"Update monitoring configurations"}),"\n",(0,r.jsx)(n.li,{children:"Review security settings"}),"\n",(0,r.jsx)(n.li,{children:"Clean up unused resources"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Connection Problems"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify API server URL"}),"\n",(0,r.jsx)(n.li,{children:"Check kubeconfig validity"}),"\n",(0,r.jsx)(n.li,{children:"Validate service account token"}),"\n",(0,r.jsx)(n.li,{children:"Ensure network connectivity"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Git Access Issues"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify repository URL"}),"\n",(0,r.jsx)(n.li,{children:"Check credentials"}),"\n",(0,r.jsx)(n.li,{children:"Validate branch existence"}),"\n",(0,r.jsx)(n.li,{children:"Test repository access"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Monitoring Problems"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check metrics server status"}),"\n",(0,r.jsx)(n.li,{children:"Verify cAdvisor access"}),"\n",(0,r.jsx)(n.li,{children:"Validate service account permissions"}),"\n",(0,r.jsx)(n.li,{children:"Review resource quotas"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Namespace Issues"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check namespace existence"}),"\n",(0,r.jsx)(n.li,{children:"Verify namespace permissions"}),"\n",(0,r.jsx)(n.li,{children:"Validate resource quotas"}),"\n",(0,r.jsx)(n.li,{children:"Review namespace policies"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);