"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[361],{3406:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"installation/kubernetes","title":"Kubernetes","description":"This guide describes how to install and run Kublade on a Kubernetes cluster using Helm charts and Docker images.","source":"@site/docs/installation/kubernetes.md","sourceDirName":"installation","slug":"/installation/kubernetes","permalink":"/docs/installation/kubernetes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Docker","permalink":"/docs/installation/docker"},"next":{"title":"Projects","permalink":"/docs/projects"}}');var s=r(4848),l=r(8453);const i={sidebar_position:3},t="Kubernetes",o={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"1. Create the Environment Secret",id:"1-create-the-environment-secret",level:3},{value:"2. Add the Helm Chart Repository",id:"2-add-the-helm-chart-repository",level:3},{value:"3. Configure values YAML files",id:"3-configure-values-yaml-files",level:3},{value:"4. Deploy Using Helm",id:"4-deploy-using-helm",level:3},{value:"5. Generate the Application Key",id:"5-generate-the-application-key",level:3},{value:"6. Migrate Database",id:"6-migrate-database",level:3},{value:"7. Access the Application",id:"7-access-the-application",level:3},{value:"Example for port-forwarding:",id:"example-for-port-forwarding",level:4}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"kubernetes",children:"Kubernetes"})}),"\n",(0,s.jsx)(n.p,{children:"This guide describes how to install and run Kublade on a Kubernetes cluster using Helm charts and Docker images."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.p,{children:["Make sure you have completed all steps in the ",(0,s.jsx)(n.a,{href:"/docs/prerequisites",children:"Prerequisites"})," section. Additionally, please ensure your environment meets the following requirements:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Kubernetes Cluster:"})," For deploying generated manifests"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Helm:"})," For scaffolding the application"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.h3,{id:"1-create-the-environment-secret",children:"1. Create the Environment Secret"}),"\n",(0,s.jsxs)(n.p,{children:["Prepare a Kubernetes Secret containing your environment variables (from your ",(0,s.jsx)(n.code,{children:".env"})," file):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic kublade-env-secret --from-env-file=.env\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-add-the-helm-chart-repository",children:"2. Add the Helm Chart Repository"}),"\n",(0,s.jsx)(n.p,{children:"Add the Laravel Helm chart repository:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm repo add renoki-co https://charts.renoki.org\nhelm repo update\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-configure-values-yaml-files",children:"3. Configure values YAML files"}),"\n",(0,s.jsxs)(n.p,{children:["Create a ",(0,s.jsx)(n.code,{children:"values-app.yaml"})," file for the Kublade app:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"app:\n  image:\n    repository: ghcr.io/kublade/kublade-app\n    pullPolicy: Always\n    tag: latest\n  envSecretName: kublade-env-secret\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Create a ",(0,s.jsx)(n.code,{children:"values-worker.yaml"})," file for the Kublade worker (Horizon):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"app:\n  image:\n    repository: ghcr.io/kublade/kublade-worker\n    pullPolicy: Always\n    tag: latest\n  command: php artisan horizon\n  envSecretName: kublade-env-secret\n"})}),"\n",(0,s.jsx)(n.p,{children:"Adjust the image repository and tag if you want to use a specific version."}),"\n",(0,s.jsx)(n.h3,{id:"4-deploy-using-helm",children:"4. Deploy Using Helm"}),"\n",(0,s.jsx)(n.p,{children:"Deploy the app and worker using Helm:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm install kublade renoki-co/laravel -f values-app.yaml\nhelm install kublade-worker renoki-co/laravel-worker -f values-worker.yaml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-generate-the-application-key",children:"5. Generate the Application Key"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl exec -it <app-pod-name> -- php artisan key:generate\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-migrate-database",children:"6. Migrate Database"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl exec -it <app-pod-name> -- php artisan migrate --no-interaction --force\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl exec -it <app-pod-name> -- php artisan db:seed\n"})}),"\n",(0,s.jsx)(n.h3,{id:"7-access-the-application",children:"7. Access the Application"}),"\n",(0,s.jsxs)(n.p,{children:["Expose the application using a LoadBalancer service or use ",(0,s.jsx)(n.code,{children:"kubectl port-forward"})," for local access."]}),"\n",(0,s.jsx)(n.h4,{id:"example-for-port-forwarding",children:"Example for port-forwarding:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward svc/<service-name> 8080:80\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>t});var a=r(6540);const s={},l=a.createContext(s);function i(e){const n=a.useContext(l);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);